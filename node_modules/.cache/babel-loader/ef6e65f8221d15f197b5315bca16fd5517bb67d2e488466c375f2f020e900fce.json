{"ast":null,"code":"import { ActionTypes } from \"../constants/action-types\";\nconst initialState = {\n  numberCart: 0,\n  Carts: [],\n  productData: [],\n  cartItems: []\n};\nexport const cartReducer = (state = initialState, {\n  type,\n  payload\n}) => {\n  console.log(state);\n  console.log(payload);\n  switch (type) {\n    case ActionTypes.GET_NUMBER_CART:\n      return {\n        ...state\n      };\n    case ActionTypes.ADD_TO_CART:\n      if (state.Carts.length === 0) {\n        // If the cart is empty, add the new product as a new item\n        const newItem = {\n          ...payload,\n          quantity: 1\n        };\n        console.log(newItem);\n        return {\n          ...state,\n          Carts: [newItem],\n          numberCart: state.numberCart + 1\n        };\n      } else {\n        // Check if the product with the same _id exists in the cart\n\n        const existingItem = state.Carts.find(item => {\n          return item.id === payload.id;\n        });\n        if (existingItem) {\n          // If the product exists, update its quantity using map\n\n          return {\n            ...state,\n            Carts: state.Carts.map(item => item.id === payload.id ? {\n              ...item,\n              quantity: item.quantity + 1\n            } : item),\n            numberCart: state.numberCart + 1\n          };\n        } else {\n          // If the product is not in the cart, add it as a new item\n\n          const newItem = {\n            ...payload,\n            quantity: 1\n          };\n          console.log(state);\n          return {\n            ...state,\n            Carts: [...state.Carts, newItem],\n            numberCart: state.numberCart + 1\n          };\n        }\n      }\n    case ActionTypes.FETCH_PRODUCT_DATA_SUCCESS:\n      console.log(state);\n      return {\n        ...state,\n        productData: [...state.Carts]\n      };\n    case ActionTypes.REMOVE_FROM_CART:\n      const itemToRemove = state.Carts.find(item => item.id === payload);\n      if (!itemToRemove) {\n        return state;\n      }\n      if (itemToRemove.quantity > '1') {\n        const updatedCarts = state.Carts.map(item => item.id === payload ? {\n          ...item,\n          quantity: item.quantity - 1\n        } : item);\n        return {\n          ...state,\n          Carts: updatedCarts,\n          numberCart: state.numberCart - 1\n        };\n      } else {\n        const updatedCarts = state.Carts.filter(item => item.id !== payload);\n        return {\n          ...state,\n          Carts: updatedCarts,\n          numberCart: state.numberCart - 1\n        };\n      }\n    case ActionTypes.UPDATE_CART_ITEM_QUANTITY:\n      const {\n        productId,\n        newQuantity\n      } = payload;\n      const updatedCartItems = state.Carts.map(item => {\n        console.log(item);\n        return item.productId === productId ? {\n          ...item,\n          quantity: newQuantity\n        } : item;\n      });\n      console.log(updatedCartItems);\n      console.log(...state);\n      return {\n        ...state,\n        cartItems: updatedCartItems\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ActionTypes","initialState","numberCart","Carts","productData","cartItems","cartReducer","state","type","payload","console","log","GET_NUMBER_CART","ADD_TO_CART","length","newItem","quantity","existingItem","find","item","id","map","FETCH_PRODUCT_DATA_SUCCESS","REMOVE_FROM_CART","itemToRemove","updatedCarts","filter","UPDATE_CART_ITEM_QUANTITY","productId","newQuantity","updatedCartItems"],"sources":["/Users/vivek/Documents/GitHub/shopping-app/src/Redux/reducers/CartReducer.js"],"sourcesContent":["import { ActionTypes } from \"../constants/action-types\"\n\nconst initialState = {\n  numberCart: 0,\n  Carts: [],\n  productData: [],\n  cartItems: [],\n}\n\nexport const cartReducer = (state = initialState, { type, payload }) => {\n  console.log(state)\n  console.log(payload)\n  \n\n  switch (type) {\n    case ActionTypes.GET_NUMBER_CART:\n      return {\n        ...state\n      };\n      case ActionTypes.ADD_TO_CART:\n       \n          if (state.Carts.length === 0) {\n            // If the cart is empty, add the new product as a new item\n            const newItem = {\n              ...payload,\n              quantity: 1,\n            };\n            console.log(newItem)\n            return {\n              ...state,\n              Carts: [newItem],\n              numberCart: state.numberCart + 1,\n            };\n          } else {\n            // Check if the product with the same _id exists in the cart\n            \n\n            const existingItem = state.Carts.find(item =>{\n              \n              return (item.id === payload.id)\n            } );\n        \n            if (existingItem) {\n              // If the product exists, update its quantity using map\n            \n              return {\n                ...state,\n                Carts: state.Carts.map(item =>\n                  item.id === payload.id ? { ...item, quantity: item.quantity + 1 } : item\n                ),\n                numberCart: state.numberCart + 1,\n              };\n            } else {\n              // If the product is not in the cart, add it as a new item\n            \n              const newItem = {\n                ...payload,\n                quantity: 1,\n              };\n              console.log(state)\n              return {\n                ...state,\n                Carts: [...state.Carts, newItem],\n                numberCart: state.numberCart + 1,\n              };\n             \n            }\n          }\n        \n\n    case ActionTypes.FETCH_PRODUCT_DATA_SUCCESS:\n      console.log(state);\n \n\n      return {\n        ...state,\n        productData: [...state.Carts],\n      };\n     \n    case ActionTypes.REMOVE_FROM_CART:\n    const itemToRemove=state.Carts.find((item)=>item.id === payload);\n    if(!itemToRemove){\n      return state;\n    }\n    if(itemToRemove.quantity > '1'){\n      const updatedCarts=state.Carts.map((item)=>\n      item.id === payload ?{...item,quantity:item.quantity - 1}:item)\n      \n      return{\n        ...state,\n      Carts:updatedCarts,\n    numberCart:state.numberCart - 1,\n        };\n    }else{\n      const updatedCarts=state.Carts.filter((item)=>item.id !== payload);\n      return {\n        ...state,\n        Carts: updatedCarts,\n        numberCart: state.numberCart - 1,\n      };\n    }\n  \n    case ActionTypes.UPDATE_CART_ITEM_QUANTITY:\n      const { productId, newQuantity } = payload;\n      const updatedCartItems = state.Carts.map((item) =>{\n        console.log(item)\n        \n    return(item.productId === productId ? { ...item, quantity: newQuantity } : item)\n\n      }\n        \n      );\n     console.log(updatedCartItems)\n     console.log(...state)\n      return {\n        ...state,\n        cartItems: updatedCartItems,\n      };\n\n    default:\n      return state;\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}